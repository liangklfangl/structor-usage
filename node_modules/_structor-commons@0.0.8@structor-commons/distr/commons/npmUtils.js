"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function execute(e,t){return new Promise(function(r,n){try{exec(e,{cwd:t},function(e,t,a){e?n(e):r(t)})}catch(e){n(e)}})}function installPackages(e,t){var r=void 0;return getNpmConfigVariable("progress",t).then(function(e){return r=e,setNpmConfigVariable("progress","false",t)}).then(function(){return execute("npm install "+e+" -S -E",t)}).then(function(){return setNpmConfigVariable("progress",r,t)})}function installDefault(e){var t=void 0;return getNpmConfigVariable("progress",e).then(function(r){return t=r,setNpmConfigVariable("progress","false",e)}).then(function(){return execute("npm install",e)}).then(function(){return setNpmConfigVariable("progress",t,e)})}function getNpmConfigVariable(e,t){return execute("npm get "+e,t).catch(function(e){console.error(e)})}function setNpmConfigVariable(e,t,r){return execute("npm set "+e+"="+t,r).catch(function(e){console.error(e)})}function getPackageAbsolutePath(e,t){return execute("node -p \"require.resolve('"+e+"/package.json')\"",t).then(function(e){return _path2.default.dirname(e)}).catch(function(e){})}function getPackageVersion(e,t){return execute("node -p \"require.resolve('"+e+"/package.json')\"",t).then(function(e){if(e)return fileManager.readJson(e.trim()).then(function(e){return e.version})}).catch(function(e){})}function appendScripts(e,t){var r=_path2.default.join(t,"package.json");return fileManager.readJson(r).then(function(t){return t.scripts=Object.assign({},t.scripts,e),fileManager.writeJson(r,t)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.installPackages=installPackages,exports.installDefault=installDefault,exports.getNpmConfigVariable=getNpmConfigVariable,exports.setNpmConfigVariable=setNpmConfigVariable,exports.getPackageAbsolutePath=getPackageAbsolutePath,exports.getPackageVersion=getPackageVersion,exports.appendScripts=appendScripts;var _path=require("path"),_path2=_interopRequireDefault(_path),_child_process=require("child_process"),_child_process2=_interopRequireDefault(_child_process),_fileManager=require("./fileManager.js"),fileManager=_interopRequireWildcard(_fileManager),exec=_child_process2.default.exec;