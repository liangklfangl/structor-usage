"use strict";function findDefaultExportsNode(e){var r=null;return(0,_utils.traverse)(e,function(e){"ExportDefaultDeclaration"===e.type&&(r=e.declaration)}),r}function findExportsNode(e){var r=null;return(0,_utils.traverse)(e,function(e){"ExportDeclaration"===e.type&&(r=e.declaration)}),r}function getImportsObject(e){var r={};return(0,_utils.traverse)(e,function(e){if("ImportDeclaration"===e.type){var t=e.specifiers,o=e.source;t&&t.length>0&&o&&t.forEach(function(e){var t=e.type,p=e.local,n=o.value;"ImportNamespaceSpecifier"===t&&p&&"Identifier"===p.type&&n?r[p.name]={source:n}:"ImportDefaultSpecifier"===t&&p&&"Identifier"===p.type&&n?r[p.name]={source:n}:"ImportSpecifier"===t&&p&&"Identifier"===p.type&&n&&(r[p.name]={source:n,member:!0})})}}),r}function getExportObject(e){var r={};return(0,_utils.traverseWithResult)(e,function(e,r){var t=e.type,o=e.key,p=e.value;if(p&&o&&"Property"===t)if("Identifier"===o.type){if("Identifier"===p.type)return r[o.name]=p.name,r;if("ObjectExpression"===p.type)return r[o.name]=r[o.name]||{},r[o.name]}else if("Literal"===o.type){if("Identifier"===p.type)return r[o.value]=p.name,r;if("ObjectExpression"===p.type)return r[o.value]=r[o.name]||{},r[o.name]}return r},r),r}function getNamedExportObject(e){var r=void 0;return(0,_utils.traverse)(e,function(e){if("ExportNamedDeclaration"===e.type&&e.specifiers){r={};var t=e.specifiers;t.forEach(function(e){var t=(e.type,e.exported),o=e.local;t&&t.name&&o&&o.name&&(r[t.name]=o.name)})}}),r}function addNamespaceImport(e,r,t){if(e.body=e.body||[],e.body.length>0)for(var o=0;o>=0;)o=(0,_lodash.findIndex)(e.body,function(e){var o=e.type,p=e.specifiers,n=e.source;if("ImportDeclaration"===o&&p&&n){var i=p[0],a=i.type,d=i.local,s=n.value;if("ImportNamespaceSpecifier"===a&&d&&s)return d.name===r||s===t}return!1}),o>=0&&e.body.splice(o,1);for(var p=-1,n=0;n<e.body.length;n++){var i=e.body[n].type;"ImportDeclaration"===i&&(p=n)}return e.body.splice(p>=0?p+1:0,0,{type:"ImportDeclaration",specifiers:[{type:"ImportNamespaceSpecifier",local:{type:"Identifier",name:r}}],source:{type:"Literal",value:t,raw:"'"+t+"'"}}),e}function addDefaultImport(e,r,t){if(e.body=e.body||[],e.body.length>0)for(var o=0;o>=0;)o=(0,_lodash.findIndex)(e.body,function(e){var o=e.type,p=e.specifiers,n=e.source;if("ImportDeclaration"===o&&p&&n){var i=p[0],a=i.type,d=i.local,s=n.value;if("ImportDefaultSpecifier"===a&&d&&s)return d.name===r||s===t}return!1}),o>=0&&e.body.splice(o,1);for(var p=-1,n=0;n<e.body.length;n++){var i=e.body[n].type;"ImportDeclaration"===i&&(p=n)}return e.body.splice(p>=0?p+1:0,0,{type:"ImportDeclaration",specifiers:[{type:"ImportDefaultSpecifier",local:{type:"Identifier",name:r}}],source:{type:"Literal",value:t,raw:"'"+t+"'"}}),e}function addNamedExport(e,r){var t=void 0;if((0,_utils.traverse)(e,function(e){"ExportNamedDeclaration"===e.type&&(t=e)}),t){if(t.specifiers=t.specifiers||[],t.specifiers.length>0){var o=(0,_lodash.findIndex)(t.specifiers,function(e){var t=e.type,o=e.exported,p=e.local;if("ExportSpecifier"===t&&o&&p)return o.name===r});o>=0&&t.specifiers.splice(o,1)}t.specifiers.push({type:"ExportSpecifier",exported:{type:"Identifier",name:r},local:{type:"Identifier",name:r}})}else e.body=e.body||[],e.body.push({type:"ExportNamedDeclaration",declaration:null,specifiers:[{type:"ExportSpecifier",exported:{type:"Identifier",name:r},local:{type:"Identifier",name:r}}]});return e}function createObjectExpressionNode(){return{type:"ObjectExpression",properties:[]}}function addPropertyToObjectNode(e,r,t){if("ObjectExpression"===e.type){e.properties=e.properties||[];var o={type:"Property",key:{type:"Identifier",name:r},value:{type:"Identifier",name:t},computed:!1,kind:"init",method:!1,shorthand:!1};r===t&&(o.shorthand=!0),e.properties.push(o)}return e}function deletePropertyFromObjectNode(e,r,t){if("ObjectExpression"===e.type){e.properties=e.properties||[];var o=[];e.properties.forEach(function(e){var p=e.type,n=e.key,i=e.value;"Property"===p&&n&&i&&n.name!==r&&i.name!==t&&o.push(e)}),e.properties=o}return e}function findPropertyInObjectNode(e,r){var t=void 0;return"ObjectExpression"===e.type&&e.properties&&(t=e.properties.find(function(e){var t=e.type,o=e.key,p=e.value;return!("Property"!==t||!o||!p)&&o.name===r})),t}function findPropertyByValueInObjectNode(e,r){var t=void 0;return"ObjectExpression"===e.type&&e.properties&&(t=e.properties.find(function(e){var t=e.type,o=e.key,p=e.value;return!("Property"!==t||!o||!p)&&p.name===r})),t}function addSpreadElementToArrayNode(e,r){return e&&"ArrayExpression"===e.type&&(e.elements=e.elements||[],e.elements.push({type:"SpreadElement",argument:{type:"Identifier",name:r}})),e}function deleteSpreadElementFromArrayNode(e,r){if(e&&"ArrayExpression"===e.type){var t=[],o=e.elements;o&&o.length>0&&o.forEach(function(e){var o=e.type,p=e.argument;"SpreadElement"===o&&p&&p.name!==r&&t.push(e)}),e.elements=t}return e}function findDefaultImport(e,r){for(var t=void 0,o=0;o<e.body.length;o++){var p=e.body[o],n=p.type,i=p.source,a=p.specifiers;if("ImportDeclaration"===n&&i&&i.value===r){if(a&&a.length>0){var d=a.find(function(e){return e.type&&"ImportDefaultSpecifier"===e.type&&e.local});d&&(t=d.local.name)}break}}return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.findDefaultExportsNode=findDefaultExportsNode,exports.findExportsNode=findExportsNode,exports.getImportsObject=getImportsObject,exports.getExportObject=getExportObject,exports.getNamedExportObject=getNamedExportObject,exports.addNamespaceImport=addNamespaceImport,exports.addDefaultImport=addDefaultImport,exports.addNamedExport=addNamedExport,exports.createObjectExpressionNode=createObjectExpressionNode,exports.addPropertyToObjectNode=addPropertyToObjectNode,exports.deletePropertyFromObjectNode=deletePropertyFromObjectNode,exports.findPropertyInObjectNode=findPropertyInObjectNode,exports.findPropertyByValueInObjectNode=findPropertyByValueInObjectNode,exports.addSpreadElementToArrayNode=addSpreadElementToArrayNode,exports.deleteSpreadElementFromArrayNode=deleteSpreadElementFromArrayNode,exports.findDefaultImport=findDefaultImport;var _lodash=require("lodash"),_utils=require("./utils.js");