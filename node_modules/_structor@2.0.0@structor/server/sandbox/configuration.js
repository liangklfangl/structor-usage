"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function setupProjectPaths(e){var t=_path2["default"].join(e,SERVICE_DIR).replace(/\\/g,"/");config.project.paths={dir:e,configFilePath:_path2["default"].join(t,"config.json").replace(/\\/g,"/"),deskSourceDirPath:_path2["default"].join(t,"src").replace(/\\/g,"/"),deskPageFilePath:_path2["default"].join(t,"src","PageForDesk.js").replace(/\\/g,"/"),deskIndexFilePath:_path2["default"].join(t,"src","index.js").replace(/\\/g,"/"),deskIndexTemplatePath:_path2["default"].join(t,"src","index.tpl").replace(/\\/g,"/"),deskEntryPointFilePath:_path2["default"].join(t,"src","default.js").replace(/\\/g,"/"),deskDirPath:_path2["default"].join(t,"desk").replace(/\\/g,"/"),docsDirPath:_path2["default"].join(t,"docs").replace(/\\/g,"/"),docsComponentsDirPath:_path2["default"].join(t,"docs","components").replace(/\\/g,"/"),componentDefaultsDirPath:_path2["default"].join(t,"defaults").replace(/\\/g,"/")}}function checkPaths(e){var t=_promise2["default"].resolve([]);return(0,_lodash.forOwn)(e,function(e,r){t=t.then(function(t){return fileManager.isExisting(e).then(function(){return t})["catch"](function(e){return t.push(e),t})})}),t}function checkProjectDir(){return checkPaths(config.project.paths)}function loadProjectConfig(){return fileManager.readJson(config.project.paths.configFilePath).then(function(e){var t={};if(!e.paths)throw Error("The paths section is missing in the current project configuration.");(0,_lodash.forOwn)(e.paths,function(e,r){t[r]=_path2["default"].join(config.project.paths.dir,e).replace(/\\/g,"/")});var r={};if(!e.files)throw Error("The files section is missing in the current project configuration.");(0,_lodash.forOwn)(e.files,function(e,t){r[t]=_path2["default"].join(config.project.paths.dir,e).replace(/\\/g,"/")}),config.project.conf=(0,_extends3["default"])({},e,{paths:t,files:r})})}function projectDir(e){return arguments.length>0?void setupProjectPaths(e):config.project.paths.dir}function init(e){return projectDir(e),checkProjectDir().then(function(e){if(e.length>0){var t="";throw e.forEach(function(e){t+=e+"\n"}),Error(t)}}).then(function(){return loadProjectConfig()})}function deskEntryPointFilePath(){return config.project.paths.deskEntryPointFilePath}function deskDirPath(){return config.project.paths.deskDirPath}function deskModelFilePath(){return config.project.paths.deskModelFilePath}function deskSourceDirPath(){return config.project.paths.deskSourceDirPath}function deskIndexFilePath(){return config.project.paths.deskIndexFilePath}function deskIndexTemplatePath(){return config.project.paths.deskIndexTemplatePath}function getProjectConfig(){return config.project}Object.defineProperty(exports,"__esModule",{value:!0}),exports.SERVICE_DIR=void 0;var _extends2=require("babel-runtime/helpers/extends"),_extends3=_interopRequireDefault(_extends2),_promise=require("babel-runtime/core-js/promise"),_promise2=_interopRequireDefault(_promise);exports.projectDir=projectDir,exports.init=init,exports.deskEntryPointFilePath=deskEntryPointFilePath,exports.deskDirPath=deskDirPath,exports.deskModelFilePath=deskModelFilePath,exports.deskSourceDirPath=deskSourceDirPath,exports.deskIndexFilePath=deskIndexFilePath,exports.deskIndexTemplatePath=deskIndexTemplatePath,exports.getProjectConfig=getProjectConfig;var _path=require("path"),_path2=_interopRequireDefault(_path),_lodash=require("lodash"),_fileManager=require("../commons/fileManager.js"),fileManager=_interopRequireWildcard(_fileManager),SERVICE_DIR=exports.SERVICE_DIR=".structor",config={project:{paths:{},conf:{}}};